# AI应用威胁建模输入问卷

> **使用说明：** 请填写本问卷，AI威胁建模引擎将基于您的输入生成定制化的威胁模型文档。

---

## 第一部分：基本信息

### 1.1 项目概况

| 项目 | 内容 |
|------|------|
| **应用名称** | [填写应用名称] |
| **应用简述** | [一句话描述应用的核心功能] |
| **开发阶段** | [ ] 需求阶段 [ ] 设计阶段 [ ] 开发阶段 [ ] 测试阶段 [ ] 上线前 |
| **预计上线时间** | [YYYY-MM-DD] |
| **业务重要性** | [ ] 核心业务 [ ] 重要业务 [ ] 一般业务 |

### 1.2 联系信息

| 角色 | 姓名 | 联系方式 |
|------|------|----------|
| **产品负责人** | | |
| **技术负责人** | | |
| **安全对接人** | | |

---

## 第二部分：应用类型与场景

### 2.1 应用类型（可多选）

- [ ] **对话助手** - 提供问答、对话服务
- [ ] **智能Agent** - 具有工具调用、自主决策能力
- [ ] **RAG知识库** - 基于企业知识库的检索增强
- [ ] **内容生成** - 文本、图片、视频生成
- [ ] **代码助手** - 代码生成、审查、调试
- [ ] **多模态应用** - 图文、语音、视频交互
- [ ] **MCP服务** - 提供或集成MCP协议服务
- [ ] **其他**：[请说明]

### 2.2 核心功能场景

**请详细描述3-5个核心功能场景，包括用户操作、系统响应、数据流转：**

#### 场景1：[场景名称]
```
用户操作：
1. [步骤1]
2. [步骤2]
...

系统响应：
1. [系统如何处理]
2. [涉及哪些数据]
...

预期结果：
[最终输出什么]
```

#### 场景2：[场景名称]
```
[同上格式]
```

#### 场景3：[场景名称]
```
[同上格式]
```

### 2.3 特殊功能（如有）

- [ ] **文件上传/下载** - 描述文件类型和用途：[____]
- [ ] **代码执行** - 描述执行场景：[____]
- [ ] **数据库查询** - 描述查询权限：[____]
- [ ] **外部API调用** - 列出第三方服务：[____]
- [ ] **工作流编排** - 描述工作流类型：[____]
- [ ] **用户自定义提示词** - 描述使用场景：[____]
- [ ] **插件/扩展系统** - 描述扩展能力：[____]

---

## 第三部分：技术架构

### 3.1 整体架构

**请简要描述或提供架构图：**
```
[例如：
前端 → API网关 → 封装层服务 → 模型服务
                    ↓
                数据库/缓存
                    ↓
                知识库/向量库
]
```

**或上传架构图：** [架构图文件路径/链接]

### 3.2 技术栈

#### 前端
- **框架**：[ ] React [ ] Vue [ ] Angular [ ] 其他：[____]
- **部署方式**：[ ] Web [ ] 桌面应用 [ ] 移动应用 [ ] 小程序

#### 后端封装层
- **语言/框架**：[ ] Python/FastAPI [ ] Node.js [ ] Java/Spring [ ] Go [ ] 其他：[____]
- **API协议**：[ ] REST [ ] GraphQL [ ] gRPC [ ] 其他：[____]

#### 模型服务
- **模型类型**：[ ] 公有云API (OpenAI/Azure/AWS) [ ] 私有化部署 [ ] 开源模型
- **具体模型**：[例如：GPT-4, Claude, 文心一言等]
- **调用方式**：[ ] 直接调用 [ ] 通过代理 [ ] 自建网关

#### 数据存储
- [ ] **关系数据库**：[MySQL/PostgreSQL/其他]
- [ ] **NoSQL数据库**：[MongoDB/Redis/其他]
- [ ] **向量数据库**：[Pinecone/Milvus/其他]
- [ ] **对象存储**：[S3/OSS/其他]

#### MCP相关（如适用）
- [ ] **作为MCP服务提供者** - 提供的工具：[列举]
- [ ] **作为MCP客户端** - 调用的服务：[列举]
- **MCP SDK版本**：[版本号]

### 3.3 第三方依赖

**列出关键的第三方组件/SDK：**
| 组件名称 | 版本 | 用途 |
|---------|------|------|
| [例如：LangChain] | [0.1.0] | [Agent框架] |
| | | |
| | | |

---

## 第四部分：网络与部署

### 4.1 网络暴露

- [ ] **完全内网部署**（企业内网，无互联网访问）
- [ ] **部分互联网开放**
  - 开放的服务：[API/Web界面/其他]
  - 访问控制方式：[ ] VPN [ ] IP白名单 [ ] 域名限制 [ ] 无限制
- [ ] **完全互联网开放**（公网可访问）

### 4.2 部署环境

- **部署位置**：[ ] 公有云 [ ] 私有云 [ ] 混合云 [ ] 本地机房
- **具体平台**：[AWS/Azure/阿里云/腾讯云/其他]
- **容器化**：[ ] Docker [ ] Kubernetes [ ] 其他：[____] [ ] 无
- **隔离方式**：[ ] 容器隔离 [ ] 虚拟机 [ ] 物理隔离 [ ] 无隔离

### 4.3 网络边界

**请标注是否有以下网络边界：**
- [ ] WAF（Web应用防火墙）
- [ ] API网关
- [ ] 负载均衡器
- [ ] DDoS防护
- [ ] 其他安全设备：[____]

---

## 第五部分：数据安全

### 5.1 数据类型

**应用将处理哪些类型的数据？（可多选）**

- [ ] **个人敏感信息**
  - [ ] 姓名、身份证号
  - [ ] 手机号、邮箱
  - [ ] 地址、位置信息
  - [ ] 生物特征（人脸、指纹等）
  - [ ] 其他：[____]

- [ ] **企业敏感信息**
  - [ ] 商业机密
  - [ ] 财务数据
  - [ ] 客户数据
  - [ ] 源代码/知识产权
  - [ ] 其他：[____]

- [ ] **认证凭证**
  - [ ] 密码
  - [ ] API密钥
  - [ ] 访问令牌
  - [ ] 证书
  - [ ] 其他：[____]

- [ ] **普通业务数据**
  - 描述：[____]

### 5.2 数据来源

**训练数据/知识库数据来源：**
- [ ] 公开数据集
- [ ] 企业内部数据
- [ ] 用户生成内容
- [ ] 第三方数据
- [ ] 其他：[____]

**是否对训练数据进行过审查？** [ ] 是 [ ] 否 [ ] 计划中

### 5.3 数据处理

- **数据脱敏**：[ ] 已实施 [ ] 计划实施 [ ] 暂无计划
- **数据加密**：
  - 传输加密：[ ] HTTPS [ ] TLS [ ] 无
  - 存储加密：[ ] 全盘加密 [ ] 字段加密 [ ] 无
- **数据隔离**：
  - 多租户隔离：[ ] 物理隔离 [ ] 逻辑隔离 [ ] 不适用
  - 测试/生产隔离：[ ] 是 [ ] 否

---

## 第六部分：身份与权限

### 6.1 用户身份认证

- **认证方式**（可多选）：
  - [ ] 用户名/密码
  - [ ] SSO单点登录
  - [ ] OAuth2/OIDC
  - [ ] 多因素认证（MFA）
  - [ ] API密钥
  - [ ] 无认证（公开访问）
  - [ ] 其他：[____]

### 6.2 权限模型

- **是否有角色划分？** [ ] 是 [ ] 否
  - 如果是，请列举角色：
    - [ ] 管理员
    - [ ] 普通用户
    - [ ] 访客
    - [ ] 其他：[____]

- **权限粒度**：
  - [ ] 无权限控制
  - [ ] 粗粒度（按角色）
  - [ ] 细粒度（按功能/资源）
  - [ ] 动态权限（基于属性/上下文）

### 6.3 敏感操作

**以下操作是否需要额外授权/审批？**
| 操作 | 需要 | 不需要 | 不适用 |
|------|------|--------|--------|
| 删除数据 | [ ] | [ ] | [ ] |
| 修改配置 | [ ] | [ ] | [ ] |
| 执行代码/命令 | [ ] | [ ] | [ ] |
| 访问知识库 | [ ] | [ ] | [ ] |
| 导出数据 | [ ] | [ ] | [ ] |

---

## 第七部分：提示词与模型交互

### 7.1 系统提示词

- **是否使用系统提示词？** [ ] 是 [ ] 否
- **系统提示词是否包含以下内容？**
  - [ ] 角色定义
  - [ ] 行为约束
  - [ ] 敏感信息（密钥、密码等）⚠️
  - [ ] 业务逻辑规则
  - [ ] 知识库范围限定
  - [ ] 其他：[____]

- **系统提示词管理**：
  - 版本控制：[ ] 是 [ ] 否
  - 访问控制：[ ] 是 [ ] 否
  - 定期审查：[ ] 是 [ ] 否

### 7.2 用户输入

- **用户可以输入的内容类型**（可多选）：
  - [ ] 纯文本
  - [ ] 图片
  - [ ] 文档（PDF/Word等）
  - [ ] 代码
  - [ ] 音频/视频
  - [ ] 其他：[____]

- **输入验证**：
  - [ ] 长度限制
  - [ ] 格式验证
  - [ ] 关键词过滤
  - [ ] 恶意内容检测
  - [ ] 暂无验证 ⚠️

### 7.3 模型输出

- **输出内容是否会用于**（可多选）：
  - [ ] 直接展示给用户
  - [ ] 执行系统操作（工具调用）
  - [ ] 写入数据库
  - [ ] 触发外部API
  - [ ] 生成代码/脚本
  - [ ] 其他：[____]

- **输出安全控制**：
  - [ ] 内容安全过滤
  - [ ] XSS防护
  - [ ] 敏感信息检测
  - [ ] 输出审计
  - [ ] 暂无控制 ⚠️

---

## 第八部分：工具与操作能力

### 8.1 Agent工具（如适用）

**如果是Agent应用，请列出所有可用的工具/函数：**

| 工具名称 | 功能描述 | 风险等级 | 是否需要授权 |
|---------|---------|---------|-------------|
| [例如：execute_command] | [执行系统命令] | [高] | [是] |
| | | | |
| | | | |

**工具调用控制：**
- [ ] 有工具白名单
- [ ] 有参数校验
- [ ] 有调用审计
- [ ] 无限制 ⚠️

### 8.2 数据库操作

- **是否允许动态SQL/查询？** [ ] 是 ⚠️ [ ] 否
- **查询方式**：
  - [ ] ORM（参数化查询）
  - [ ] 存储过程
  - [ ] 拼接SQL ⚠️
  - [ ] 其他：[____]

### 8.3 文件系统操作

- **是否涉及文件操作？** [ ] 是 [ ] 否
  - [ ] 文件上传
  - [ ] 文件下载
  - [ ] 文件读取
  - [ ] 文件删除
  - [ ] 路径遍历

- **文件路径控制**：
  - [ ] 白名单限制
  - [ ] 路径规范化
  - [ ] 无限制 ⚠️

### 8.4 外部服务调用

**列出所有外部API/服务：**
| 服务名称 | 用途 | 认证方式 | 数据敏感性 |
|---------|------|---------|-----------|
| [例如：支付网关] | [在线支付] | [API密钥] | [高] |
| | | | |
| | | | |

---

## 第九部分：日志与监控

### 9.1 日志记录

**是否记录以下内容？**
| 内容 | 记录 | 不记录 |
|------|------|--------|
| 用户查询/提问 | [ ] | [ ] |
| 模型输出/回答 | [ ] | [ ] |
| 工具调用 | [ ] | [ ] |
| 系统提示词 | [ ] | [ ] |
| 认证/授权事件 | [ ] | [ ] |
| 错误/异常 | [ ] | [ ] |

### 9.2 日志安全

- **日志脱敏**：[ ] 已实施 [ ] 计划实施 [ ] 暂无
- **日志访问控制**：[ ] 已实施 [ ] 计划实施 [ ] 暂无
- **日志保留策略**：[____天/月]
- **日志完整性保护**：[ ] 已实施 [ ] 计划实施 [ ] 暂无

### 9.3 监控告警

- [ ] 异常流量监控
- [ ] 敏感操作告警
- [ ] 资源使用监控
- [ ] 安全事件告警
- [ ] 暂无监控 ⚠️

---

## 第十部分：合规与风险偏好

### 10.1 合规要求

**需要符合的合规标准**（可多选）：
- [ ] GDPR（欧盟数据保护）
- [ ] 网络安全法（中国）
- [ ] 等保2.0
- [ ] SOC2
- [ ] ISO 27001
- [ ] HIPAA（医疗）
- [ ] PCI DSS（支付）
- [ ] 其他：[____]
- [ ] 暂无合规要求

### 10.2 风险偏好

- **组织的风险承受能力**：
  - [ ] 保守（金融、医疗等）
  - [ ] 适中（一般企业应用）
  - [ ] 激进（创新/POC阶段）

- **安全与功能的优先级**：
  - [ ] 安全优先（牺牲部分功能也要保证安全）
  - [ ] 平衡（在安全和功能间找平衡）
  - [ ] 功能优先（快速上线，后续补安全）

### 10.3 已知风险

**是否已知以下风险或限制？**
- [ ] 使用了有已知漏洞的组件
- [ ] 存在遗留系统安全债
- [ ] 开发资源有限
- [ ] 安全预算有限
- [ ] 时间紧迫
- [ ] 其他：[____]

---

## 第十一部分：补充信息

### 11.1 特殊需求或约束

```
[请描述任何特殊的安全需求、技术约束或业务限制]
```

### 11.2 附加文档

**如有以下文档，请提供：**
- [ ] 需求文档（PRD）
- [ ] 技术设计文档
- [ ] 架构图
- [ ] API文档
- [ ] 数据流图
- [ ] 其他：[____]

**文档位置：** [文件路径或链接]

### 11.3 历史安全问题

**之前是否发生过安全事件？**
- [ ] 是 - 请简述：[____]
- [ ] 否

---

## 提交

**填写完成后，请将本文档提供给AI威胁建模引擎。**

**引擎将生成：**
1. ✅ 定制化威胁模型文档
2. ✅ 适用于您应用的威胁清单
3. ✅ 分层级的风险评估
4. ✅ 具体可操作的安全建议
5. ✅ 按优先级排序的修复计划

---

*AI应用威胁建模输入问卷 v1.0*
*基于26个AI安全威胁知识库*
